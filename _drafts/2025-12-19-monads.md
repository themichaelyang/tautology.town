---
layout: post
title: "Javascript is full of monads"
---

*I think* I figured out what a monad is, and [now I can't stop seeing them everywhere](https://en.wikipedia.org/wiki/Frequency_illusion).

Javascript is full of monads:

- Promises are monads (and functors) via `.then()`
- `async/await` is [do-notation](https://en.wikibooks.org/wiki/Haskell/do_notation) for Promises
- Arrays are functors via `.map()`. They are monads too via `.flatMap()`, but we usually don't use them in that way.
- Optional chaining (`?.`) makes property access a Maybe monad

Some notes on monad pedagogy:

- "bind" is a way to chain operations on the inner type that produce the wrapped type.
- "bind" also joins the inner contexts
- Monads are concerned with the "shape" of types.
- Arrays are better described as functors, not monads. They are monads too via `.flatMap()`, but we usually don't use them that way.
- Monads are not containers; they are a property of types with generics (types are parameterized by another type)!
- Infix notation of binds makes learning about monads very hard, but makes a lot of sense when using monads, q they make chaining more obvious.
- Monads are more often used for chaining operations on contexts, functors are for transforming the inside of structures.
- This guy was right: https://byorgey.wordpress.com/2009/01/12/abstraction-intuition-and-the-monad-tutorial-fallacy
- I think the best way to introduce monads would be:
  1. Function signatures
  2. Function composition / methods chains
  2. Generic types
  3. Arrays as functors
  4. Monads as context
- Monads are the tuples of <type, bind, unit>, “monadic” is a description of a type that has an associated monad. We colloquially call a type with a monad a monad, but I think this is technically incorrect -- the type is monadic. I think it is easier to think of monadic as describing a type, not monads as a type in itself.